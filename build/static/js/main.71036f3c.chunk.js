(this["webpackJsonpchat-frontend"]=this["webpackJsonpchat-frontend"]||[]).push([[0],{139:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),s=n(63),i=n.n(s),o=(n(74),n.p,n(75),n(2)),l=n.n(o),d=n(4),u=n(10),h=n(6),p=n.n(h),j=n(3),m=n(0),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"currentColor";return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,fill:n,class:"bi bi-arrow-left",viewBox:"0 0 16 16",children:Object(m.jsx)("path",{"fill-rule":"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"})})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"currentColor";return Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,fill:n,class:"bi bi-box-arrow-right",viewBox:"0 0 16 16",children:[Object(m.jsx)("path",{"fill-rule":"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"}),Object(m.jsx)("path",{"fill-rule":"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})]})},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"currentColor";return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,fill:n,class:"bi bi-google",viewBox:"0 0 16 16",children:Object(m.jsx)("path",{d:"M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"})})},b="http",g="192.168.56.1",O="5000",w="api/v1",y="".concat(b,"://").concat(g).concat(":5000","/"),N={protocol:b,host:g,port:O,apiUrl:w,endpoint:"".concat(b,"://").concat(g).concat(":5000","/").concat(w),hostUrl:y},k="https",C="chatmake.herokuapp.com",A="api/v1",S=("".concat(k,"://").concat(C).concat(""),"".concat(k,"://").concat(C).concat("","/").concat(A),window.location.hostname,window.location.port,N),M=n(38),_=function(e){for(var t=e+"=",n=document.cookie.split(";"),a=0;a<n.length;a++){for(var r=n[a];" "==r.charAt(0);)r=r.substring(1,r.length);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return null},P={isAuth:!0,AdditionalParams:{},isJsonRequest:!0},R=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,n=_("auth");n=null===(e=n)||void 0===e?void 0:e.replace("%20"," ");var a={Authorization:"","Content-Type":"application/json"};return t.hasOwnProperty("isAuth")&&t.isAuth&&(a.Authorization=n),t.hasOwnProperty("isJsonRequest")&&t.isJsonRequest&&(a["Content-Type"]="application/json"),t.hasOwnProperty("AdditionalParams")&&t.AdditionalParams&&(a=Object(M.a)(Object(M.a)({},a),t.AdditionalParams)),{headers:a}},z=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(S.endpoint,"/user/get-user"),R());case 2:return t=e.sent,e.abrupt("return",t||null);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=(t[0],t[1],Object(j.g)()),a=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(S.endpoint,"/auth/google"));case 2:t=e.sent,n=t.data.url,window.location.href=n;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)(Object(d.a)(l.a.mark((function e(){var t,a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:t=e.sent,a=t.data.data.id,console.log(a),a&&n.push("/dashboard?id=".concat(a));case 6:case"end":return e.stop()}}),e)}))),[]),Object(m.jsx)("div",{className:"w-100 vh-100 bg-heavy-dark",children:Object(m.jsxs)("div",{className:"home-box container py-5",children:[Object(m.jsx)("h1",{className:"text-center text-light mb-5",children:"Chat Make"}),Object(m.jsx)("div",{className:"bg-light-dark d-flex flex-column p-5 rounded-3 justify-content-center align-items-center",style:{height:"60vh"},children:Object(m.jsxs)("div",{onClick:a,className:"btn btn-dark mt-3 text-light py-3 px-4 d-flex align-items-center",children:[x(40,40,"white"),Object(m.jsx)("div",{className:"ms-2 fs-5",children:"Google Login"})]})})]})})},T=n(67),H=n(68),J=n(29),L=n.n(J),B=n(66),F=function(){var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e"];function t(t){for(var n=0;n<6;n++){var a=Math.round(14*Math.random());t+=e[a]}return t}var n=t("#"),a=t("#");return"linear-gradient("+Math.round(360*Math.random())+"deg, "+n+", "+a+")"},D=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return e.length>=t?e.slice(0,t)+" . . .":e},I=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],s=L.a.parse(Object(j.h)().search),i=s.id,o=s.room,h=s.prs,f=Object(r.useState)(),x=Object(u.a)(f,2),b=x[0],g=x[1],O=Object(r.useState)(""),w=Object(u.a)(O,2),y=w[0],N=w[1],k=Object(r.useState)([]),C=Object(u.a)(k,2),A=C[0],M=C[1],_=Object(r.useState)([]),P=Object(u.a)(_,2),E=P[0],T=P[1],J=Object(r.useRef)(null),F=Object(j.g)(),I=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n){e.next=6;break}return a.emit("sendMessage",{id:i,username:b.first_name,room:o,message:n}),e.next=5,p.a.post("".concat(S.endpoint,"/message/add-message"),{room:o,id:i,message:n},R());case 5:c("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:t=e.sent,n=t.data.data,g(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(S.endpoint,"/message/get-message/").concat(o),R());case 2:t=e.sent,n=t.data.data,T(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat(S.endpoint,"/user/get-room-users"),{room_id:o,personal:"1"===h,user_id:i},R());case 2:t=e.sent,n=t.data.room,M(null===n||void 0===n?void 0:n.members),N(null===n||void 0===n?void 0:n.name);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=Object(B.io)(S.hostUrl)).emit("join",{id:i,room:o}),q(),U(),G();case 5:case"end":return e.stop()}}),e)}))),[]),Object(r.useEffect)((function(){a.on("message",function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:T((function(e){return[].concat(Object(H.a)(e),[t])}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(r.useEffect)((function(){J.current.scrollTo({top:J.current.scrollHeight,behavior:"smooth"})}),[E]),Object(m.jsx)("div",{className:"bg-black w-100 vh-100 d-flex flex-column justify-content-center align-items-center",children:Object(m.jsxs)("div",{className:"chat-container",children:[Object(m.jsx)("div",{className:"fs-3 text-light-dark fw-bold mb-2",children:"personal"!=y?D(y,40):""}),Object(m.jsxs)("div",{className:"w-100 mb-4 d-flex align-items-center justify-content-between",children:[Object(m.jsx)("div",{onClick:function(){F.push("/dashboard?id=".concat(i))},className:"me-3",style:{cursor:"pointer"},children:v(30,30,"white")}),parseInt(h)?function(){var e,t,n;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("img",{className:"rounded-circle me-2",src:null===(e=A[0])||void 0===e?void 0:e.avatar,style:{width:"3rem"}}),Object(m.jsxs)("div",{className:"fs-5 d-none d-sm-flex text-light-dark fw-bold",children:[null===(t=A[0])||void 0===t?void 0:t.first_name," ",null===(n=A[0])||void 0===n?void 0:n.last_name]}),Object(m.jsx)("div",{className:"flex-grow-1"})]})}():(null===A||void 0===A?void 0:A.map((function(e){return Object(m.jsx)("div",{className:"flex-grow-1",children:Object(m.jsx)("img",{className:"rounded-circle me-2",src:null===e||void 0===e?void 0:e.avatar,style:{width:"3rem"}})})}))).slice(0,5),Object(m.jsx)("img",{className:"rounded-circle me-2",src:null===b||void 0===b?void 0:b.avatar,style:{width:"3rem"}})]}),Object(m.jsxs)("div",{className:"w-100 bg-dark rounded-3 d-flex flex-column justify-content-end",style:{height:"80%"},children:[Object(m.jsx)("div",{ref:J,className:"chat-box d-flex flex-column mt-2",style:{overflowY:"scroll"},children:null===E||void 0===E?void 0:E.map((function(e){return e.id===i?Object(m.jsx)("div",{className:"align-self-end text-primary d-flex align-items-center",style:{maxWidth:"80%"},children:Object(m.jsx)("div",{className:"bg-heavy-dark py-2 px-3 text-light me-2 mb-2",style:{borderRadius:"15px 15px 0px 15px"},children:e.message})}):Object(m.jsxs)("div",{className:"align-self-start text-primary d-flex align-items-center",children:[Object(m.jsx)("div",{className:"bg-light-dark py-2 px-3 text-light ms-2 mb-2",style:{borderRadius:"15px 15px 15px 0px"},children:e.message}),parseInt(h)?"":Object(m.jsx)("div",{className:"",children:e.username})]})}))}),Object(m.jsxs)("form",{onSubmit:function(e){return I(e)},className:"d-flex mx-2 mb-2",style:{minHeight:"10px"},children:[Object(m.jsx)("input",{className:"bg-light-dark text-light rounded-pill flex-grow-1 px-3 py-2",type:"text",value:n,onChange:function(e){return c(e.target.value)},size:"1"}),Object(m.jsx)("input",{type:"submit",value:"send",className:"bg-heavy-dark text-light rounded-pill px-4 ms-2"})]})]})]})})},U=function(){return Object(m.jsx)("div",{className:"vh-100",children:Object(m.jsx)("div",{className:"container h-100 d-flex justify-content-center align-items-center",children:Object(m.jsx)("h1",{className:"display-1",children:"Opps!! Wrong URL"})})})},q=function(){var e=L.a.parse(Object(j.h)().search).id,t=Object(r.useState)(),n=Object(u.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)([]),i=Object(u.a)(s,2),o=i[0],h=i[1],v=Object(r.useState)(""),x=Object(u.a)(v,2),b=x[0],g=x[1],O=Object(r.useState)([]),w=Object(u.a)(O,2),y=w[0],N=w[1],k=Object(j.g)(),C=function(){var t=Object(d.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.post("".concat(S.endpoint,"/user/get-all"),{id:e},R());case 2:n=t.sent,h(n.data.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),A=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(S.endpoint,"/room/get-groups"),R());case 2:t=e.sent,N(t.data.groups);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),M=function(){var t=Object(d.a)(l.a.mark((function t(n){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.post("".concat(S.endpoint,"/room/one-to-one"),{id1:e,id2:n},R());case 2:a=t.sent,r=a.data.data,k.push("/chat?id=".concat(e,"&room=").concat(r,"&prs=1"));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=Object(d.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.post("".concat(S.endpoint,"/room/group-chat"),{room_id:n,user_id:e},R());case 2:k.push("/chat?id=".concat(e,"&room=").concat(n,"&prs=0"));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),P=function(){var t=Object(d.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,p.a.post("".concat(S.endpoint,"/room/create-group"),{id:e,groupname:b},R());case 3:g(""),A();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),E=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z();case 2:t=e.sent,n=t.data.data,c(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){E(),C(),A()}),[]),Object(m.jsx)("div",{className:"w-100 min-vh-100 bg-dark",children:Object(m.jsxs)("div",{className:"h-100 pb-5 d-flex flex-column",children:[Object(m.jsxs)("div",{className:"d-flex p-5 w-100 justify-content-between align-items-center",children:[Object(m.jsxs)("div",{className:"d-flex align-items-center",children:[Object(m.jsx)("img",{className:"rounded-circle me-4",src:null===a||void 0===a?void 0:a.avatar,style:{width:"4rem"},alt:""}),Object(m.jsxs)("div",{className:"text-light d-none d-sm-flex fs-3",children:[null===a||void 0===a?void 0:a.first_name," ",null===a||void 0===a?void 0:a.last_name]})]}),Object(m.jsx)("div",{onClick:function(){var e;e="auth",document.cookie=e+"=; Path=/; Expires=Thu, 01 Jan 1970 00:00:01 GMT;",k.push("/")},className:"",style:{cursor:"pointer"},children:f(40,40,"white")})]}),Object(m.jsxs)("div",{className:"h-75 w-100",children:[Object(m.jsxs)("div",{className:" w-100",children:[Object(m.jsxs)("div",{className:" w-100 px-5 d-flex flex-wrap-reverse justify-content-center",children:[Object(m.jsx)("div",{className:"display-6 text-light flex-xl-grow-1",children:"Chatrooms"}),Object(m.jsxs)("form",{onSubmit:function(e){return P(e)},className:"d-flex py-3 px-5",action:"",children:[Object(m.jsx)("input",{className:"group-name-input rounded-start bg-heavy-dark text-light flex-grow-1 px-2 py-2",type:"text",value:b,onChange:function(e){return g(e.target.value)}}),Object(m.jsx)("input",{className:"group-name-btn bg-light-dark opacity-50 text-light rounded-end fw-bold",type:"submit",value:"new group"})]})]}),Object(m.jsx)("div",{className:"room-box d-flex",style:{overflowY:"hidden"},children:null===y||void 0===y?void 0:y.map((function(e,t){var n;return Object(m.jsxs)("div",{onClick:function(){return _(e.id)},className:"m-3",children:[Object(m.jsx)("div",{className:"text-light text-center opacity-50",children:D(e.name,10)}),Object(m.jsx)("div",{className:"chat-group-box mt-2",style:{background:"".concat(null!==(n=null===e||void 0===e?void 0:e.image)&&void 0!==n?n:F()),cursor:"pointer",height:"14rem",width:"11rem",flexShrink:0,borderRadius:"60px"},alt:"group_image"})]})}))})]}),Object(m.jsx)("div",{className:"d-flex justify-content-center",children:Object(m.jsx)("div",{className:"chat-outer-box p-2 pt-3",children:null===o||void 0===o?void 0:o.map((function(e){var t,n;return Object(m.jsxs)("div",{onClick:function(){return M(e.id)},className:"chat-one-box text-light d-flex align-items-center p-3 rounded-3",style:{cursor:"pointer"},children:[Object(m.jsx)("img",{className:"rounded-circle me-3",style:{width:"3rem"},src:null===e||void 0===e?void 0:e.avatar,alt:""}),Object(m.jsxs)("div",{className:"flex-grow-1",children:[Object(m.jsx)("div",{className:"fs-5",children:e.first_name}),Object(m.jsx)("div",{className:"opacity-50",children:null!==(t=null===e||void 0===e?void 0:e.message)&&void 0!==t?t:"no conversation"})]}),Object(m.jsx)("div",{className:"opacity-50",children:null!==(n=null===e||void 0===e?void 0:e.lastDate)&&void 0!==n?n:"new mate"})]})}))})})]})]})})};var G=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(T.a,{children:Object(m.jsxs)(j.d,{children:[Object(m.jsx)(j.b,{exact:!0,path:"/",component:E}),Object(m.jsx)(j.b,{exact:!0,path:"/dashboard",component:q}),Object(m.jsx)(j.b,{exact:!0,path:"/chat",component:I}),Object(m.jsx)(j.b,{exact:!0,path:"/error",component:U}),Object(m.jsx)(j.a,{from:"**",to:"/error"})]})})})},W=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,141)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},Y=n(140);i.a.render(Object(m.jsx)(Y.a,{children:Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(G,{})})}),document.getElementById("root")),W()},74:function(e,t,n){},75:function(e,t,n){}},[[139,1,2]]]);
//# sourceMappingURL=main.71036f3c.chunk.js.map