(this["webpackJsonpchat-frontend"]=this["webpackJsonpchat-frontend"]||[]).push([[0],{139:function(e,t,n){"use strict";n.r(t);var a,r=n(1),c=n.n(r),s=n(63),i=n.n(s),o=(n(74),n.p,n(75),n(2)),l=n.n(o),d=n(4),u=n(10),h=n(6),p=n.n(h),j=n(3),m=n(0),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"currentColor";return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,fill:n,class:"bi bi-arrow-left",viewBox:"0 0 16 16",children:Object(m.jsx)("path",{"fill-rule":"evenodd",d:"M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8z"})})},x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"currentColor";return Object(m.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,fill:n,class:"bi bi-box-arrow-right",viewBox:"0 0 16 16",children:[Object(m.jsx)("path",{"fill-rule":"evenodd",d:"M10 12.5a.5.5 0 0 1-.5.5h-8a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h8a.5.5 0 0 1 .5.5v2a.5.5 0 0 0 1 0v-2A1.5 1.5 0 0 0 9.5 2h-8A1.5 1.5 0 0 0 0 3.5v9A1.5 1.5 0 0 0 1.5 14h8a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0v2z"}),Object(m.jsx)("path",{"fill-rule":"evenodd",d:"M15.854 8.354a.5.5 0 0 0 0-.708l-3-3a.5.5 0 0 0-.708.708L14.293 7.5H5.5a.5.5 0 0 0 0 1h8.793l-2.147 2.146a.5.5 0 0 0 .708.708l3-3z"})]})},f=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:20,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"currentColor";return Object(m.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,fill:n,class:"bi bi-google",viewBox:"0 0 16 16",children:Object(m.jsx)("path",{d:"M15.545 6.558a9.42 9.42 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.689 7.689 0 0 1 5.352 2.082l-2.284 2.284A4.347 4.347 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.792 4.792 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.702 3.702 0 0 0 1.599-2.431H8v-3.08h7.545z"})})},b="http",g="192.168.56.1",O="5000",w="api/v1",y="".concat(b,"://").concat(g).concat(":5000","/"),N={protocol:b,host:g,port:O,apiUrl:w,endpoint:"".concat(b,"://").concat(g).concat(":5000","/").concat(w),hostUrl:y},k="https",S="chatmake.herokuapp.com",C="api/v1",A="".concat(k,"://").concat(S).concat(""),M={protocol:k,host:S,port:"",apiUrl:C,endpoint:"".concat(k,"://").concat(S).concat("","/").concat(C),hostUrl:A},_=window.location.hostname,P=window.location.port,I="localhost"===_&&+P>=3e3?N:M,R=n(38),z={isAuth:!0,AdditionalParams:{},isJsonRequest:!0},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:z,t=localStorage.getItem("token"),n={Authorization:"","Content-Type":"application/json"};return e.hasOwnProperty("isAuth")&&e.isAuth&&(n.Authorization=t),e.hasOwnProperty("isJsonRequest")&&e.isJsonRequest&&(n["Content-Type"]="application/json"),e.hasOwnProperty("AdditionalParams")&&e.AdditionalParams&&(n=Object(R.a)(Object(R.a)({},n),e.AdditionalParams)),{headers:n}},H=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!localStorage.getItem("token")){e.next=7;break}return e.next=4,p.a.get("".concat(I.endpoint,"/user/get-user"),E());case 4:return t=e.sent,n=t.data.data,e.abrupt("return",n);case 7:return e.abrupt("return",0);case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=n(20),U=n.n(L),B=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=(t[0],t[1],Object(j.g)()),a=U.a.parse(window.location.search).token,c=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(I.endpoint,"/auth/google"));case 2:t=e.sent,n=t.data.url,window.location.href=n;case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)(Object(d.a)(l.a.mark((function e(){var t,r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(window.location.origin),a&&localStorage.setItem("token",a),e.next=4,H();case 4:t=e.sent,(r=t.id)&&(window.location.href="".concat(window.location.origin,"/chatmake/#"),n.push("/dashboard?id=".concat(r)));case 7:case"end":return e.stop()}}),e)}))),[]),Object(m.jsx)("div",{className:"w-100 vh-100 bg-heavy-dark",children:Object(m.jsxs)("div",{className:"home-box container py-5",children:[Object(m.jsx)("h1",{className:"text-center text-light mb-5",children:"Chat Make"}),Object(m.jsx)("div",{className:"bg-light-dark d-flex flex-column p-5 rounded-3 justify-content-center align-items-center",style:{height:"60vh"},children:Object(m.jsxs)("div",{onClick:c,className:"btn btn-dark mt-3 text-light py-3 px-4 d-flex align-items-center",children:[f(40,40,"white"),Object(m.jsx)("div",{className:"ms-2 fs-5",children:"Google Login"})]})})]})})},F=n(67),J=n(68),T=n(66),D=function(){var e=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e"];function t(t){for(var n=0;n<6;n++){var a=Math.round(14*Math.random());t+=e[a]}return t}var n=t("#"),a=t("#");return"linear-gradient("+Math.round(360*Math.random())+"deg, "+n+", "+a+")"},q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return e.length>=t?e.slice(0,t)+" . . .":e},W=function(){var e=Object(r.useState)(""),t=Object(u.a)(e,2),n=t[0],c=t[1],s=U.a.parse(Object(j.h)().search),i=s.id,o=s.room,h=s.prs,x=Object(r.useState)(),f=Object(u.a)(x,2),b=f[0],g=f[1],O=Object(r.useState)(""),w=Object(u.a)(O,2),y=w[0],N=w[1],k=Object(r.useState)([]),S=Object(u.a)(k,2),C=S[0],A=S[1],M=Object(r.useState)([]),_=Object(u.a)(M,2),P=_[0],R=_[1],z=Object(r.useRef)(null),L=Object(j.g)(),B=function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),!n){e.next=6;break}return a.emit("sendMessage",{id:i,username:b.first_name,room:o,message:n}),e.next=5,p.a.post("".concat(I.endpoint,"/message/add-message"),{room:o,id:i,message:n},E());case 5:c("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:t=e.sent,g(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(I.endpoint,"/message/get-message/").concat(o),E());case 2:t=e.sent,n=t.data.data,R(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=function(){var e=Object(d.a)(l.a.mark((function e(){var t,n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.post("".concat(I.endpoint,"/user/get-room-users"),{room_id:o,personal:"1"===h,user_id:i},E());case 2:t=e.sent,n=t.data.room,A(null===n||void 0===n?void 0:n.members),N(null===n||void 0===n?void 0:n.name);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)(Object(d.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(a=Object(T.io)(I.hostUrl)).emit("join",{id:i,room:o}),D(),F(),W();case 5:case"end":return e.stop()}}),e)}))),[]),Object(r.useEffect)((function(){a.on("message",function(){var e=Object(d.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:R((function(e){return[].concat(Object(J.a)(e),[t])}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[]),Object(r.useEffect)((function(){z.current.scrollTo({top:z.current.scrollHeight,behavior:"smooth"})}),[P]),Object(m.jsx)("div",{className:"bg-black w-100 vh-100 d-flex flex-column justify-content-center align-items-center",children:Object(m.jsxs)("div",{className:"chat-container",children:[Object(m.jsx)("div",{className:"fs-3 text-light-dark fw-bold mb-2",children:"personal"!=y?q(y,40):""}),Object(m.jsxs)("div",{className:"w-100 mb-4 d-flex align-items-center justify-content-between",children:[Object(m.jsx)("div",{onClick:function(){L.push("/dashboard?id=".concat(i))},className:"me-3",style:{cursor:"pointer"},children:v(30,30,"white")}),parseInt(h)?function(){var e,t,n;return Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)("img",{className:"rounded-circle me-2",src:null===(e=C[0])||void 0===e?void 0:e.avatar,style:{width:"3rem"}}),Object(m.jsxs)("div",{className:"fs-5 d-none d-sm-flex text-light-dark fw-bold",children:[null===(t=C[0])||void 0===t?void 0:t.first_name," ",null===(n=C[0])||void 0===n?void 0:n.last_name]}),Object(m.jsx)("div",{className:"flex-grow-1"})]})}():(null===C||void 0===C?void 0:C.map((function(e){return Object(m.jsx)("div",{className:"flex-grow-1",children:Object(m.jsx)("img",{className:"rounded-circle me-2",src:null===e||void 0===e?void 0:e.avatar,style:{width:"3rem"}})})}))).slice(0,5),Object(m.jsx)("img",{className:"rounded-circle me-2",src:null===b||void 0===b?void 0:b.avatar,style:{width:"3rem"}})]}),Object(m.jsxs)("div",{className:"w-100 bg-dark rounded-3 d-flex flex-column justify-content-end",style:{height:"80%"},children:[Object(m.jsx)("div",{ref:z,className:"chat-box d-flex flex-column mt-2",style:{overflowY:"scroll"},children:null===P||void 0===P?void 0:P.map((function(e){return e.id===i?Object(m.jsx)("div",{className:"align-self-end text-primary d-flex align-items-center",style:{maxWidth:"80%"},children:Object(m.jsx)("div",{className:"bg-heavy-dark py-2 px-3 text-light me-2 mb-2",style:{borderRadius:"15px 15px 0px 15px"},children:e.message})}):Object(m.jsxs)("div",{className:"align-self-start text-primary d-flex align-items-center",children:[Object(m.jsx)("div",{className:"bg-light-dark py-2 px-3 text-light ms-2 mb-2",style:{borderRadius:"15px 15px 15px 0px"},children:e.message}),parseInt(h)?"":Object(m.jsx)("div",{className:"",children:e.username})]})}))}),Object(m.jsxs)("form",{onSubmit:function(e){return B(e)},className:"d-flex mx-2 mb-2",style:{minHeight:"10px"},children:[Object(m.jsx)("input",{className:"bg-light-dark text-light rounded-pill flex-grow-1 px-3 py-2",type:"text",value:n,onChange:function(e){return c(e.target.value)},size:"1"}),Object(m.jsx)("input",{type:"submit",value:"send",className:"bg-heavy-dark text-light rounded-pill px-4 ms-2"})]})]})]})})},Y=function(){return Object(m.jsx)("div",{className:"vh-100",children:Object(m.jsx)("div",{className:"container h-100 d-flex justify-content-center align-items-center",children:Object(m.jsx)("h1",{className:"display-1",children:"Opps!! Wrong URL"})})})},G=function(){var e=U.a.parse(Object(j.h)().search).id,t=Object(r.useState)(),n=Object(u.a)(t,2),a=n[0],c=n[1],s=Object(r.useState)([]),i=Object(u.a)(s,2),o=i[0],h=i[1],v=Object(r.useState)(""),f=Object(u.a)(v,2),b=f[0],g=f[1],O=Object(r.useState)([]),w=Object(u.a)(O,2),y=w[0],N=w[1],k=Object(j.g)(),S=function(){var t=Object(d.a)(l.a.mark((function t(){var n;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.post("".concat(I.endpoint,"/user/get-all"),{id:e},E());case 2:n=t.sent,h(n.data.data);case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),C=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.get("".concat(I.endpoint,"/room/get-groups"),E());case 2:t=e.sent,N(t.data.groups);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var t=Object(d.a)(l.a.mark((function t(n){var a,r;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.post("".concat(I.endpoint,"/room/one-to-one"),{id1:e,id2:n},E());case 2:a=t.sent,r=a.data.data,k.push("/chat?id=".concat(e,"&room=").concat(r,"&prs=1"));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),M=function(){var t=Object(d.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.a.post("".concat(I.endpoint,"/room/group-chat"),{room_id:n,user_id:e},E());case 2:k.push("/chat?id=".concat(e,"&room=").concat(n,"&prs=0"));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=Object(d.a)(l.a.mark((function t(n){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n.preventDefault(),t.next=3,p.a.post("".concat(I.endpoint,"/room/create-group"),{id:e,groupname:b},E());case 3:g(""),C();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),P=function(){var e=Object(d.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,H();case 2:t=e.sent,c(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.useEffect)((function(){P(),S(),C()}),[]),Object(m.jsx)("div",{className:"w-100 min-vh-100 bg-dark",children:Object(m.jsxs)("div",{className:"h-100 pb-5 d-flex flex-column",children:[Object(m.jsxs)("div",{className:"d-flex p-5 w-100 justify-content-between align-items-center",children:[Object(m.jsxs)("div",{className:"d-flex align-items-center",children:[Object(m.jsx)("img",{className:"rounded-circle me-4",src:null===a||void 0===a?void 0:a.avatar,style:{width:"4rem"},alt:""}),Object(m.jsxs)("div",{className:"text-light d-none d-sm-flex fs-3",children:[null===a||void 0===a?void 0:a.first_name," ",null===a||void 0===a?void 0:a.last_name]})]}),Object(m.jsx)("div",{onClick:function(){localStorage.removeItem("token")},className:"",style:{cursor:"pointer"},children:x(40,40,"white")})]}),Object(m.jsxs)("div",{className:"h-75 w-100",children:[Object(m.jsxs)("div",{className:" w-100",children:[Object(m.jsxs)("div",{className:" w-100 px-5 d-flex flex-wrap-reverse justify-content-center",children:[Object(m.jsx)("div",{className:"display-6 text-light flex-xl-grow-1",children:"Chatrooms"}),Object(m.jsxs)("form",{onSubmit:function(e){return _(e)},className:"d-flex py-3 px-5",action:"",children:[Object(m.jsx)("input",{className:"group-name-input rounded-start bg-heavy-dark text-light flex-grow-1 px-2 py-2",type:"text",value:b,onChange:function(e){return g(e.target.value)}}),Object(m.jsx)("input",{className:"group-name-btn bg-light-dark opacity-50 text-light rounded-end fw-bold",type:"submit",value:"new group"})]})]}),Object(m.jsx)("div",{className:"room-box d-flex",style:{overflowY:"hidden"},children:null===y||void 0===y?void 0:y.map((function(e,t){var n;return Object(m.jsxs)("div",{onClick:function(){return M(e.id)},className:"m-3",children:[Object(m.jsx)("div",{className:"text-light text-center opacity-50",children:q(e.name,10)}),Object(m.jsx)("div",{className:"chat-group-box mt-2",style:{background:"".concat(null!==(n=null===e||void 0===e?void 0:e.image)&&void 0!==n?n:D()),cursor:"pointer",height:"14rem",width:"11rem",flexShrink:0,borderRadius:"60px"},alt:"group_image"})]})}))})]}),Object(m.jsx)("div",{className:"d-flex justify-content-center",children:Object(m.jsx)("div",{className:"chat-outer-box p-2 pt-3",children:null===o||void 0===o?void 0:o.map((function(e){var t,n;return Object(m.jsxs)("div",{onClick:function(){return A(e.id)},className:"chat-one-box text-light d-flex align-items-center p-3 rounded-3",style:{cursor:"pointer"},children:[Object(m.jsx)("img",{className:"rounded-circle me-3",style:{width:"3rem"},src:null===e||void 0===e?void 0:e.avatar,alt:""}),Object(m.jsxs)("div",{className:"flex-grow-1",children:[Object(m.jsx)("div",{className:"fs-5",children:e.first_name}),Object(m.jsx)("div",{className:"opacity-50",children:null!==(t=null===e||void 0===e?void 0:e.message)&&void 0!==t?t:"no conversation"})]}),Object(m.jsx)("div",{className:"opacity-50",children:null!==(n=null===e||void 0===e?void 0:e.lastDate)&&void 0!==n?n:"new mate"})]})}))})})]})]})})};var K=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsx)(F.a,{children:Object(m.jsxs)(j.d,{children:[Object(m.jsx)(j.b,{exact:!0,path:"/",component:B}),Object(m.jsx)(j.b,{exact:!0,path:"/dashboard",component:G}),Object(m.jsx)(j.b,{exact:!0,path:"/chat",component:W}),Object(m.jsx)(j.b,{exact:!0,path:"/error",component:Y}),Object(m.jsx)(j.a,{from:"**",to:"/error"})]})})})},Q=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,141)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,c=t.getLCP,s=t.getTTFB;n(e),a(e),r(e),c(e),s(e)}))},V=n(140);i.a.render(Object(m.jsx)(V.a,{children:Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(K,{})})}),document.getElementById("root")),Q()},74:function(e,t,n){},75:function(e,t,n){}},[[139,1,2]]]);
//# sourceMappingURL=main.a8cdc825.chunk.js.map